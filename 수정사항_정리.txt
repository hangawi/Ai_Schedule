=== ì´ë™ì‹œê°„ ê³„ì‚° ë²„ê·¸ ìˆ˜ì • ë‚´ì—­ ===

## ë¬¸ì œ ìƒí™©
- í•™ìƒ B(ì‚¼ì‚¼ ì‚¼)ê°€ 12:00ì— ìˆ˜ì—… ì¢…ë£Œ
- í•™ìƒ A(ì´ì´ ì´)ê°€ ê°™ì€ ë‚  13:00ì— ìˆ˜ì—… ì‹œì‘
- Aì˜ ì´ë™ì‹œê°„ì´ 60ë¶„(ë°©ì¥ ê¸°ì¤€)ìœ¼ë¡œ í‘œì‹œë¨
- ì‹¤ì œë¡œëŠ” B â†’ Aê°€ 10ë¶„ë°–ì— ì•ˆ ê±¸ë¦¼
- ê²°ê³¼: ì´ë™ 13:00-14:00, ìˆ˜ì—… 14:00-17:00ë¡œ í‘œì‹œë¨

## ì›í•˜ëŠ” ê²°ê³¼
- ì´ë™: 13:00-13:10 (10ë¶„, ì‚¼ì‚¼ ì‚¼ â†’ ì´ì´ ì´)
- ìˆ˜ì—…: 13:10-16:10 (3ì‹œê°„)
- ë¹ˆ ì‹œê°„ ì—†ì´ ì—°ê²°ë˜ì–´ì•¼ í•¨

## ìˆ˜ì • ë‚´ìš©

### 1. lastLocationByDate ì—…ë°ì´íŠ¸ ë¡œì§ ìˆ˜ì • (3ê³³)
**ë¬¸ì œ**: í•™ìƒë“¤ì´ ì²˜ë¦¬ ìˆœì„œëŒ€ë¡œ ë¬´ì¡°ê±´ ë®ì–´ì“°ê¸°
**í•´ê²°**: ë” ëŠ¦ê²Œ ëë‚˜ëŠ” í•™ìƒë§Œ ì—…ë°ì´íŠ¸

```javascript
// ìˆ˜ì • ì „
lastLocationByDate[dateStr] = { location, endMinutes };

// ìˆ˜ì • í›„
if (!lastLocationByDate[dateStr] || endMinutes > lastLocationByDate[dateStr].endMinutes) {
    lastLocationByDate[dateStr] = { location, endMinutes };
}
```

### 2. ì¬ë°°ì • ì‹œ assignedSlotsByDate ì²´í¬ ì¶”ê°€
**ë¬¸ì œ**: ì¬ë°°ì • ì‹œ lastLocationByDateë§Œ ì²´í¬ (ì²˜ë¦¬ ìˆœì„œ ê¸°ì¤€)
**í•´ê²°**: assignedSlotsByDateì—ì„œ ì‹¤ì œ ì´ì „ í•™ìƒ ì°¾ì•„ì„œ ì¬ê³„ì‚°

```javascript
// í•´ë‹¹ ë‚ ì§œì—ì„œ í˜„ì¬ ìŠ¬ë¡¯ë³´ë‹¤ ë¨¼ì € ëë‚˜ëŠ” í•™ìƒ ì°¾ê¸°
const slotsBeforeCurrent = assignedOnDate.filter(slot =>
    slot.endMinutes <= travelStartMinutes && slot.userId !== travelSlot.user
);

// ê°€ì¥ ëŠ¦ê²Œ ëë‚˜ëŠ” í•™ìƒ ì°¾ì•„ì„œ ê·¸ ìœ„ì¹˜ì—ì„œ ì´ë™ì‹œê°„ ì¬ê³„ì‚°
```

### 3. FINAL PASS ì¶”ê°€ (ëª¨ë“  ë°°ì¹˜ ì™„ë£Œ í›„)
**ë¬¸ì œ**: ì²˜ë¦¬ ìˆœì„œì™€ ìµœì¢… ë°°ì¹˜ ìˆœì„œê°€ ë‹¬ë¼ì„œ ì´ë™ì‹œê°„ì´ ì˜ëª» ê³„ì‚°ë¨
**í•´ê²°**: ëª¨ë“  í•™ìƒ ë°°ì¹˜ ì™„ë£Œ í›„, ìµœì¢…ì ìœ¼ë¡œ ì´ë™ì‹œê°„ ì¬ê³„ì‚°

```javascript
// ê° ì´ë™ ìŠ¬ë¡¯ë§ˆë‹¤
for (travelSlot in travelSlotsArray) {
    // í•´ë‹¹ ë‚ ì§œì—ì„œ ì´ë™ ì‹œì‘ ì „ì— ëë‚˜ëŠ” í•™ìƒ ì°¾ê¸°
    const slotsBeforeCurrent = assignedOnDate.filter(...)

    // ì´ë™ì‹œê°„ ì¬ê³„ì‚°
    const newTravelMinutes = calculateTravelTime(...)

    // travelSlot ì—…ë°ì´íŠ¸
    travelSlot.endTime = newEndTime

    // ìˆ˜ì—… ìŠ¬ë¡¯ë„ ì‹œê°„ ì°¨ì´ë§Œí¼ ì•ë‹¹ê¹€
    activitySlot.startTime -= timeDifference
}
```

### 4. ìˆ˜ì—… ì‹œê°„ ìë™ ì¡°ì •
**ë¬¸ì œ**: ì´ë™ì‹œê°„ë§Œ ì¤„ì–´ë“¤ê³  ìˆ˜ì—…ì€ ì›ë˜ ì‹œê°„ì— ê·¸ëŒ€ë¡œ
**í•´ê²°**: ì´ë™ì‹œê°„ì´ ì¤„ì–´ë“ ë§Œí¼ ìˆ˜ì—… ì‹œê°„ë„ ì•ë‹¹ê¹€

```javascript
const timeDifference = 60ë¶„ - 10ë¶„ = 50ë¶„
ìˆ˜ì—… ì‹œì‘: 14:00 â†’ 13:10 (50ë¶„ ì•ë‹¹ê¹€)
ìˆ˜ì—… ì¢…ë£Œ: 17:00 â†’ 16:10 (50ë¶„ ì•ë‹¹ê¹€)
```

## ìµœì¢… ê²°ê³¼ (ë¡œê·¸ í™•ì¸)

```
ğŸ”„ [FINAL PASS] ì´ë™ì‹œê°„ ìµœì¢… ì¬ê³„ì‚° ì‹œì‘
ğŸ” [ì¬ê³„ì‚° ëŒ€ìƒ] ì´ì´ ì´ (2025-12-15 13:00)
   ì´ì „ ìŠ¬ë¡¯ ë°œê²¬: userId=691d4adc41e89d4bcc9a003a, ì¢…ë£Œ=12:00
âœ… ì¬ê³„ì‚°: ì‚¼ì‚¼ ì‚¼ â†’ ì´ì´ ì´: 60ë¶„ â†’ 10ë¶„
ğŸ“ ìŠ¬ë¡¯ ì—…ë°ì´íŠ¸: ì´ë™ 1ê°œ, ìˆ˜ì—… 18ê°œ
ğŸ“ ìˆ˜ì—… ì‹œê°„ ì¡°ì •: 14:00 â†’ 13:10 (50ë¶„ ì•ë‹¹ê¹€)
âœ… [FINAL PASS] ì´ë™ì‹œê°„ ìµœì¢… ì¬ê³„ì‚° ì™„ë£Œ
```

## í™•ì¸ ë°©ë²•

1. ë¸Œë¼ìš°ì € ì™„ì „ ìƒˆë¡œê³ ì¹¨ (Ctrl + Shift + R)
2. ëŒ€ì¤‘êµí†µ ëª¨ë“œë¡œ ì „í™˜
3. ì´ì´ ì´ í•™ìƒì˜ 2025-12-15 ì¼ì • í™•ì¸:
   - ì´ë™: 13:00-13:10 (10ë¶„) âœ“
   - ìˆ˜ì—…: 13:10-16:10 (3ì‹œê°„) âœ“
   - 13:10-14:00 ë¹ˆ ì‹œê°„ ì—†ìŒ âœ“

## ìˆ˜ì •ëœ íŒŒì¼
- client/src/services/travelScheduleCalculator.js

## ì£¼ìš” ìˆ˜ì • ë¼ì¸
- Line 1208-1214: lastLocationByDate ì¡°ê±´ë¶€ ì—…ë°ì´íŠ¸ (ë¶„í•  ë°°ì¹˜)
- Line 1321-1327: lastLocationByDate ì¡°ê±´ë¶€ ì—…ë°ì´íŠ¸ (ì¬ë°°ì •)
- Line 1238-1287: assignedSlotsByDate ì²´í¬ ì¶”ê°€
- Line 1416-1422: lastLocationByDate ì¡°ê±´ë¶€ ì—…ë°ì´íŠ¸ (ì›ë˜ ë°°ì¹˜)
- Line 1476-1578: FINAL PASS ë¡œì§ ì¶”ê°€

# 통화 중 일정 자동 인식 기능

## 개요
통화 중 대화 내용을 실시간으로 분석하여 일정이나 약속 관련 내용을 자동으로 감지하고 일정으로 등록할 수 있는 기능입니다.

## 주요 기능

### 1. 실시간 통화 녹음
- 브라우저의 음성 인식 API를 활용한 실시간 텍스트 변환
- 통화 시작/종료 버튼으로 수동 제어
- 마이크 권한 자동 요청 및 관리

### 2. AI 기반 일정 감지
- Google Gemini AI를 활용한 대화 내용 분석
- 일정 제목, 날짜, 시간, 참석자, 장소 등 자동 추출
- 신뢰도 점수 기반 필터링 (60% 이상만 표시)

### 3. 자동 일정 등록
- 감지된 일정을 사용자가 확인 후 등록
- 기존 일정 시스템과 완전 통합
- 통화 내용을 일정 설명에 자동 포함

## 사용 방법

### 1. 통화 녹음 시작
1. MeetAgent 애플리케이션 상단의 "통화 녹음" 버튼 클릭
2. 마이크 권한 허용
3. 녹음 시작 (빨간색 마이크 아이콘으로 상태 표시)

### 2. 통화 진행
- 일정과 관련된 대화를 자연스럽게 진행
- AI가 실시간으로 대화 내용을 분석
- 일정 감지 시 자동으로 모달 창 표시

### 3. 일정 확인 및 등록
1. 감지된 일정 모달에서 내용 확인
2. 신뢰도 점수와 추출된 정보 검토
3. "일정 등록" 버튼으로 캘린더에 추가
4. 불필요한 일정은 "무시" 버튼으로 제거

### 4. 통화 종료
- "녹음 중지" 버튼으로 통화 녹음 종료
- 최종 분석 결과 확인

## 환경 설정

### 필수 환경 변수
```bash
# 클라이언트 (.env)
REACT_APP_GEMINI_API_KEY=your_gemini_api_key

# 서버 (.env)
GEMINI_API_KEY=your_gemini_api_key
```

### Google Gemini API 키 발급
1. [Google AI Studio](https://makersuite.google.com/) 접속
2. API 키 생성
3. 환경 변수에 키 설정

## 기술 구조

### 클라이언트 사이드
- `useCallRecognition.js`: 통화 녹음 및 분석 훅
- `CallScheduleModal.js`: 감지된 일정 확인 모달
- `CallRecordingButton.js`: 녹음 시작/중지 버튼

### 서버 사이드
- `callAnalysisController.js`: 통화 분석 API 컨트롤러
- `routes/callAnalysis.js`: API 라우트 정의
- Google Gemini AI 통합

## AI 분석 기준

### 높은 신뢰도 (80% 이상)
- 구체적인 날짜와 시간이 명시된 경우
- 명확한 일정 제목과 참석자 정보

### 보통 신뢰도 (60-80%)
- 날짜나 시간 중 하나만 명확한 경우
- 일정 키워드는 있지만 세부사항 부족

### 낮은 신뢰도 (60% 미만)
- 모호한 표현 ("나중에", "언젠가")
- 일정과 관련 없는 대화

## 보안 및 개인정보

### 데이터 처리
- 통화 내용은 임시로만 처리되며 서버에 저장되지 않음
- AI 분석 결과만 클라이언트에 반환
- 사용자가 확인 후 일정 등록 시에만 데이터베이스 저장

### 권한 관리
- 마이크 접근 권한 필요
- 브라우저별 권한 설정 자동 관리
- PWA 환경에서 권한 지속성 보장

## 지원 브라우저
- Chrome (권장)
- Edge
- Firefox
- Safari (제한적 지원)

## 제한사항
- 인터넷 연결 필요 (AI 분석)
- 브라우저 음성 인식 API 의존
- 한국어 대화만 지원
- 배경 소음이 많은 환경에서 정확도 저하 가능

## 문제 해결

### 마이크 권한 오류
1. 브라우저 설정에서 마이크 권한 확인
2. HTTPS 연결 필요 (로컬 개발 시 localhost 사용)
3. 브라우저 재시작 후 다시 시도

### AI 분석 오류
1. 환경 변수 설정 확인
2. Google Gemini API 키 유효성 검증
3. 인터넷 연결 상태 확인

### 일정 등록 실패
1. 로그인 상태 확인
2. 일정 제목이나 날짜 정보 보완
3. 서버 연결 상태 확인

## 향후 개선 계획
- 다국어 지원 (영어, 일본어 등)
- 화상회의 플랫폼 연동
- 음성 감정 분석 추가
- 자동 참석자 초대 기능
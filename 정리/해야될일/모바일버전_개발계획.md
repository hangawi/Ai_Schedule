# 모바일 버전 개발 계획

## 📅 작성일: 2026-01-05
## 🔄 최종 업데이트: 2026-01-05

---

## 🎯 목표
모바일 환경에서 대시보드 중심의 UI/UX 제공

---

## ✅ 완료된 작업

### Phase 1: 기본 구조 설정 (완료)
- ✅ `MobileDashboard.js` 컴포넌트 생성
- ✅ 모바일 감지 로직 통합 (useMobileDetection 활용)
- ✅ App.js에서 모바일일 때 대시보드 표시
- ✅ 상단 헤더 구현 (햄버거 메뉴, 로고, 로그아웃)
- ✅ 중앙 메뉴 버튼 3개 구현 (일정/그룹/달력)
- ✅ 하단 네비게이션 바 구현 (새로고침/카메라/채팅/마이크)

### Phase 2: FullCalendar 통합 (완료)
- ✅ FullCalendar 설치 완료
- ✅ `MobileScheduleView.js` 생성 및 FullCalendar 통합
- ✅ 한국어 설정 완료
- ✅ 날짜 클릭 시 일 뷰 자동 전환
- ✅ 기존 일정 API 연동 (선호시간/개인시간/예외일정)
- ✅ 타임존 문제 해결 (UTC → Local Time)
- ✅ 이벤트 병합 로직 구현 (mergeSlots)

### Phase 3: 화면 연결 (완료)
- ✅ 일정 버튼 → MobileScheduleView 연결
- ✅ 그룹 버튼 → MobileGroupsView 연결
- ✅ 달력 버튼 → MobileCalendarView 연결
- ✅ React Router 설정 완료
- ✅ SimplifiedScheduleDisplay 컴포넌트 생성 (깔끔한 디자인)

---

## 🐛 새로 발견된 문제들 (2026-01-05 - 2차)

### ✅ 완료된 문제들
1. **개인시간 빨간색 표시 누락** ✅ 완료
   - 증상: PC 버전에서는 빨간색으로 표시되던 개인시간이 모바일에서 안 보임
   - 원인: SimplifiedScheduleDisplay에서 색상 블록 표시 미구현
   - 해결: SimplifiedScheduleDisplay를 블록 UI로 변경
   - 파일: `SimplifiedScheduleDisplay.js`, `SimplifiedScheduleDisplay.css`
   - 결과: 선호시간은 파란색(#3b82f6) 블록, 개인시간은 빨간색(#ef4444) 블록으로 표시

2. **선호시간 블록 표시 개선** ✅ 완료 (문제 1과 함께 해결)
   - 증상: 현재 텍스트로만 표시됨 (예: "09-12 13-17")
   - 요구사항: PC 버전처럼 색상 블록으로 표시
   - 해결: 각 시간대마다 별도의 색상 블록으로 표시
   - 결과:
     - 블록들이 가로로 나열 (flex-direction: row)
     - 블록 안에 "12-13 점심시간" 형태로 한 줄 표시
     - 09-12이면 파란색 한 블록, 두 시간대면 두 블록

3. **블록 레이아웃 개선** ✅ 완료
   - 문제: 블록이 세로로 쌓임
   - 해결: `.schedule-blocks`를 `flex-direction: row`, `flex-wrap: wrap`로 변경
   - 문제: 블록 내부에서 시간과 이름이 세로로 표시됨
   - 해결: `.time-block`을 `flex-direction: row`로 변경
   - 최종 결과: "12-13 점심시간" 형태로 한 줄에 표시

4. **개인시간 디버깅 로그 추가** ✅ 완료
   - 개인시간이 표시되지 않는 문제 진단을 위해 상세 로그 추가
   - `slot.days`, `slot.daysOfWeek` 모두 체크하도록 수정
   - `slot.title`, `slot.name` 모두 처리하도록 수정
   - 콘솔에서 personalTimes 데이터 확인 가능

5. **선호시간/개인시간 스크롤 기능** ✅ 완료
   - 증상: 5개 이상의 시간대가 있을 때 레이아웃이 깨짐
   - 요구사항: 5개 이상이면 스크롤로 표시
   - 해결: SimplifiedScheduleDisplay에 max-height(300px) 및 overflow-y: auto 설정
   - 추가: 커스텀 스크롤바 스타일 적용 (6px 너비, 회색 톤)

6. **헤더 전체 누락** ✅ 완료
   - 증상: 로고, 로그아웃 등 헤더 전체가 사라짐
   - 원인: MobileScheduleView가 별도 라우트로 SchedulingSystem 헤더 미포함
   - 해결: MobileScheduleView에 별도 헤더 추가
   - 구성: 로고(MeetAgent 이미지 + 텍스트), 로그아웃 버튼
   - 파일: `MobileScheduleView.js`, `MobileScheduleView.css`

### ⚠️ 작업 대기 중

7. **수정 버튼 누락** ⚠️ 다음 작업
   - 증상: "내프로필 수정하기", "시간표 수정하기" 버튼이 없어짐
   - 해결방안: 적절한 위치에 수정 버튼 재추가

---

## 🐛 해결된 문제들 (2026-01-05 - 1차)

### ✅ 완료
1. **개인시간 캘린더 미표시 문제**
   - 해결: `toISOString()` → `formatLocalDateTime()` 변경

2. **SimplifiedScheduleDisplay 병합 문제**
   - 해결: 연속 시간대 자동 병합 로직 추가

3. **개인시간 데이터 표시 누락**
   - 해결: personalTimes 데이터 구조 확인 및 표시 로직 수정

4. **설명 텍스트 누락**
   - 해결: 설명 텍스트 추가

5. **편집 버튼 누락 (1차)**
   - 해결: 편집 버튼 추가 (위치 재조정 필요)

6. **헤더 구조 문제 (1차)**
   - 해결: schedule-header 제거, "내 일정" 위치 변경 (추가 작업 필요)

---

## 📋 수정 작업 목록

### ✅ 완료된 수정 작업 (2026-01-05)
- ✅ MobileScheduleView.js 131, 154번 라인: `toISOString()` → `formatLocalDateTime()` 변경
- ✅ SimplifiedScheduleDisplay.js: 연속 시간대 병합 로직 추가
- ✅ SimplifiedScheduleDisplay.js: personalTimes 데이터 표시 로직 확인
- ✅ MobileScheduleView.js: 선호시간/개인시간 설명 텍스트 추가
- ✅ MobileScheduleView.js: 편집 버튼 추가 (시간표 수정, 개인시간 수정)
- ✅ MobileScheduleView.js: 헤더 구조 수정 ("내 일정" 위치 변경)

### Phase 4: 하단 버튼 기능 구현 (향후)
- ✅ 새로고침 버튼 구현
- [ ] 카메라 버튼 (기능 미정)
- [ ] 채팅 버튼 (기능 미정)
- [ ] 마이크 버튼 (기능 미정)

---

## 🗂️ 파일 구조

```
client/src/
├── components/
│   └── mobile/
│       ├── MobileDashboard.js          (메인 대시보드)
│       ├── MobileDashboard.css
│       ├── MobileCalendarView.js       (FullCalendar)
│       ├── MobileCalendarView.css
│       ├── MobileScheduleView.js       (일정 화면)
│       ├── MobileGroupView.js          (그룹 화면)
│       └── BottomNavigation.js         (하단 네비게이션)
├── hooks/
│   └── useMobileDetection.js           (기존 활용)
└── App.js                              (라우팅 설정)
```

---

## 🎨 UI 레이아웃

```
┌─────────────────────────┐
│  [≡] 헤더 (삼선 버튼)    │
├─────────────────────────┤
│                         │
│   ┌─────────────────┐   │
│   │   📅 일정      │   │  → 내 프로필 탭
│   └─────────────────┘   │
│                         │
│   ┌─────────────────┐   │
│   │   👥 그룹      │   │  → 일정맞추기 그룹
│   └─────────────────┘   │
│                         │
│   ┌─────────────────┐   │
│   │   📆 달력      │   │  → FullCalendar
│   └─────────────────┘   │
│                         │
├─────────────────────────┤
│  🔄  📷  💬  🎤        │  하단 네비게이션
└─────────────────────────┘
```

---

## 📌 우선순위

1. **높음**: Phase 1 (기본 구조)
2. **높음**: Phase 2 (FullCalendar)
3. **중간**: Phase 3 (화면 연결)
4. **낮음**: Phase 4 (추가 버튼 기능)

---

## 🔍 참고사항

- 기존 `useMobileDetection` 훅 활용
- 화면 너비 768px 이하 = 모바일
- FullCalendar 한국어 설정 필요
- 반응형 디자인 고려

---

## ✅ 체크리스트

- [ ] FullCalendar npm 패키지 설치
- [ ] MobileDashboard 컴포넌트 생성
- [ ] 3개 메뉴 버튼 UI 구현
- [ ] 하단 네비게이션 바 구현
- [ ] 새로고침 버튼 기능 구현
- [ ] FullCalendar 통합
- [ ] 라우팅 연결 (일정/그룹/달력)
- [ ] 모바일 테스트 (F12 > Toggle Device)

---

## 📝 메모

- 카메라, 채팅, 마이크 버튼은 추후 기능 정의 후 구현
- 기존 컴포넌트 최대한 재사용
- 모바일 최적화 우선

---

## 🔧 주요 수정 내역 (2026-01-05)

### 2차 수정 - 블록 UI 개선
**날짜**: 2026-01-05

#### SimplifiedScheduleDisplay.js
1. **블록 UI 구현** (line 94-119)
   - 텍스트 표시 방식 → 색상 블록 표시 방식 변경
   - `preference-block` (파란색), `personal-block` (빨간색) 클래스 적용
   - 시간과 이름을 한 줄에 표시

2. **데이터 파싱 강화** (line 13-50)
   - `slot.days` 필드 추가 지원 (개인시간)
   - `slot.title` 또는 `slot.name` 모두 처리
   - 디버깅 로그 추가 (console.log)

#### SimplifiedScheduleDisplay.css
1. **블록 컨테이너 레이아웃** (line 20-25)
   - `flex-direction: row` - 블록들이 가로로 나열
   - `flex-wrap: wrap` - 공간 부족 시 자동 줄바꿈

2. **블록 스타일** (line 27-58)
   - `.time-block`: 기본 블록 스타일 (padding, border-radius)
   - `.preference-block`: 파란색 배경 (#3b82f6)
   - `.personal-block`: 빨간색 배경 (#ef4444)
   - 블록 내부: `flex-direction: row`로 시간과 이름 한 줄 표시

---

## 🔧 주요 수정 내역 (2026-01-05) - 1차

### 1. 타임존 문제 해결
**파일**: `MobileScheduleView.js` (line 131, 154)
- **문제**: 개인시간이 UTC로 변환되어 캘린더에 표시 안됨
- **해결**: `toISOString()` → `formatLocalDateTime()` 함수 사용
- **결과**: 개인시간이 정상적으로 월 뷰 캘린더에 표시됨

### 2. 시간대 병합 로직 추가
**파일**: `SimplifiedScheduleDisplay.js` (line 44-72)
- **문제**: 연속된 시간대가 병합되지 않고 개별로 표시됨 (예: 11-12, 12-13)
- **해결**: 정렬 후 연속 시간 자동 병합 로직 구현
- **결과**: 깔끔하게 병합된 시간대 표시 (예: 11-13)

### 3. 설명 텍스트 및 편집 버튼 추가
**파일**: `MobileScheduleView.js` (line 369-398)
- **추가 요소**:
  - 선호시간 설명: "클릭 또는 챗봇으로 추가한 가능한 시간들 (자동배정 시 사용됨)"
  - 개인시간 설명: "자동 스케줄링 시 이 시간들은 제외됩니다"
  - 시간표 수정 버튼
  - 개인시간 수정 버튼
- **스타일**: `MobileScheduleView.css` (line 69-96)

### 4. 헤더 구조 개선
**파일**: `MobileScheduleView.js` (line 408-415)
- **변경 전**: 별도 schedule-header로 "내 일정"만 표시 (로고/로그아웃 숨김)
- **변경 후**: schedule-header 제거, "내 일정"을 컨텐츠 영역 상단에 배치
- **결과**: 기존 SchedulingSystem 헤더(로고, 로그아웃 등) 유지됨

### 5. CSS 스타일 추가
**파일**: `MobileScheduleView.css`
- `.schedule-page-title` (line 29-36): 컨텐츠 영역 내 페이지 제목 스타일
- `.section-description` (line 69-74): 섹션 설명 텍스트 스타일
- `.edit-button` (line 76-96): 편집 버튼 스타일 (hover, active 효과 포함)

---

## ✨ 현재 상태 요약

### 완벽하게 작동하는 기능
- ✅ 모바일 대시보드 (일정/그룹/달력 버튼)
- ✅ FullCalendar 통합 (월/주/일 뷰)
- ✅ 선호시간 캘린더 표시
- ✅ 개인시간 캘린더 표시 (타임존 문제 해결)
- ✅ 날짜 클릭 시 일 뷰 자동 전환
- ✅ 이벤트 병합 (연속 시간대)
- ✅ SimplifiedScheduleDisplay (깔끔한 디자인)
- ✅ 설명 텍스트 표시
- ✅ 편집 버튼 추가
- ✅ 올바른 헤더 구조 (로고/로그아웃 유지)
- ✅ 하단 네비게이션 (고정 위치)

### 향후 개발 예정
- 카메라 버튼 기능 정의 및 구현
- 채팅 버튼 기능 정의 및 구현
- 마이크 버튼 기능 정의 및 구현

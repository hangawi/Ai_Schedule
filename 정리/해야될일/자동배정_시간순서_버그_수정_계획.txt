============================================================================
ìë™ë°°ì • ì‹œê°„ìˆœì„œ ë²„ê·¸ ìˆ˜ì • ê³„íš
============================================================================
ì‘ì„±ì¼: 2025-12-12

============================================================================
1. ë¬¸ì œ í˜„í™©
============================================================================

[ë¬¸ì œ ì„¤ëª…]
- ìë™ë°°ì • ì‹¤í–‰ ì‹œ ì‹œê°„ ìˆœì„œëŒ€ë¡œ ë°°ì •ë˜ì§€ ì•ŠìŒ
- ì˜ˆìƒ: A(9-12ì‹œ ì„ í˜¸) â†’ 9-10ì‹œ ë°°ì •, B(13-17ì‹œ ì„ í˜¸) â†’ 10-11ì‹œ ë°°ì •
- ì‹¤ì œ: A â†’ 11-12ì‹œ ë°°ì •, B â†’ 13-14ì‹œ ë°°ì •

[ì›ì¸ ë¶„ì„]
íŒŒì¼: server/services/schedulingAlgorithm/services/slotAssignmentService.js
í•¨ìˆ˜: assignByTimeOrder (51ë²ˆì§¸ ì¤„ë¶€í„°)

í˜„ì¬ ë¸”ë¡ ì •ë ¬ ë¡œì§ (276-289ë²ˆì§¸ ì¤„):
```javascript
allPossibleBlocks.sort((a, b) => {
  // 1ìˆœìœ„: í•„ìš”í•œ ë§Œí¼ ì±„ìš¸ ìˆ˜ ìˆëŠ” ë¸”ë¡ ìš°ì„  (ë¶„í•  ìµœì†Œí™”)
  const aIsFull = a.block.length >= remainingSlots;
  const bIsFull = b.block.length >= remainingSlots;
  if (aIsFull !== bIsFull) return bIsFull ? 1 : -1;

  // 2ìˆœìœ„: ê¸´ ë¸”ë¡ ìš°ì„ 
  const lengthDiff = b.block.length - a.block.length;
  if (lengthDiff !== 0) return lengthDiff;

  // 3ìˆœìœ„: ì‹œê°„ ìˆœì„œ (ì´ë¥¸ ì‹œê°„ë¶€í„°)
  return a.startIndex - b.startIndex;
});
```

ë¬¸ì œì :
1. "í•„ìš”ëŸ‰ ì¶©ì¡± ë¸”ë¡ ìš°ì„ " + "ê¸´ ë¸”ë¡ ìš°ì„ "ì´ ì‹œê°„ ìˆœì„œë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ìŒ
2. í•œ ë©¤ë²„ê°€ í•„ìš”í•œ ì „ì²´ ì‹œê°„ì„ í•œ ë²ˆì— ê°€ì ¸ê°€ë ¤ê³  ì‹œë„
3. ê²°ê³¼ì ìœ¼ë¡œ ëŠ¦ì€ ì‹œê°„ëŒ€ì— ê¸´ ë¸”ë¡ì´ ë°°ì •ë  ìˆ˜ ìˆìŒ

ì˜ˆì‹œ:
- A í•„ìš”: 6ìŠ¬ë¡¯ (3ì‹œê°„)
- ê°€ëŠ¥í•œ ë¸”ë¡: [9-10 (2ìŠ¬ë¡¯)], [10-11 (2ìŠ¬ë¡¯)], [11-12 (2ìŠ¬ë¡¯)], [9-12 (6ìŠ¬ë¡¯)]
- í˜„ì¬ ë¡œì§: [9-12 (6ìŠ¬ë¡¯)] ì„ íƒ (í•„ìš”ëŸ‰ ì¶©ì¡± + ê¸´ ë¸”ë¡)
- ì›í•˜ëŠ” ë¡œì§: [9-10 (2ìŠ¬ë¡¯)] ì„ íƒ (ì‹œê°„ ìˆœì„œ ìš°ì„ )

============================================================================
2. ëª¨ë“œ ë° ë³´ê¸° ì˜µì…˜ êµ¬ì¡°
============================================================================

[ë°°ì • ëª¨ë“œ (assignmentMode)] - 3ê°œ
íŒŒì¼: client/src/components/scheduler/AutoSchedulerPanel.js
1. 'normal': ê¸°ë³¸ ëª¨ë“œ (ê°€ëŠ¥í•œ ì‹œê°„ì´ ì ì€ ë©¤ë²„ ìš°ì„ )
2. 'first_come_first_served': ì„ ì°©ìˆœ ëª¨ë“œ (ë¨¼ì € ë“¤ì–´ì˜¨ ë©¤ë²„ ìš°ì„ )
3. 'from_today': ì˜¤ëŠ˜ ê¸°ì¤€ ë°°ì • (ê³¼ê±° ë‚ ì§œ ì œì™¸)

[ë³´ê¸° ì˜µì…˜ (travelMode)] - 4ê°œ
íŒŒì¼: client/src/hooks/useTravelMode.js
1. 'normal': ì¼ë°˜ ë³´ê¸°
2. 'public': ëŒ€ì¤‘êµí†µ ë³´ê¸°
3. 'driving': ìë™ì°¨ ë³´ê¸°
4. 'walking': ë„ë³´ ë³´ê¸° (ìì „ê±°ëŠ” ì¶”ê°€ í™•ì¸ í•„ìš”)

ì¤‘ìš”: 
- transportMode/travelModeëŠ” "ëª¨ë“œ"ê°€ ì•„ë‹Œ "ë³´ê¸° ì˜µì…˜"
- ê° ë°°ì • ëª¨ë“œë§ˆë‹¤ 4ê°œì˜ ë³´ê¸° ì˜µì…˜ ì„ íƒ ê°€ëŠ¥
- í˜„ì¬ server/services/schedulingAlgorithm/index.jsì—ì„œ ì˜ëª»ëœ ë¶„ê¸° ì²˜ë¦¬:
  * transportModeê°€ 'public'/'driving'/'walking'ì´ë©´ â†’ assignByPublicTransport ì‚¬ìš©
  * ê·¸ ì™¸('normal')ì´ë©´ â†’ assignByTimeOrder ì‚¬ìš©
  * ë¬¸ì œ: ë³´ê¸° ì˜µì…˜ê³¼ ë°°ì • ë¡œì§ì´ í˜¼í•©ë¨

============================================================================
3. ìˆ˜ì • ê³„íš
============================================================================

[Phase 1] ì‹œê°„ ìˆœì„œ ìš°ì„  ë°°ì • ë¡œì§ ìˆ˜ì •
íŒŒì¼: server/services/schedulingAlgorithm/services/slotAssignmentService.js
í•¨ìˆ˜: assignByTimeOrder

ìˆ˜ì • 1: ë¸”ë¡ ì •ë ¬ ìˆœì„œ ë³€ê²½ (276-289ë²ˆì§¸ ì¤„)
ë³€ê²½ ì „:
  1ìˆœìœ„: í•„ìš”ëŸ‰ ì¶©ì¡± ë¸”ë¡ ìš°ì„ 
  2ìˆœìœ„: ê¸´ ë¸”ë¡ ìš°ì„ 
  3ìˆœìœ„: ì‹œê°„ ìˆœì„œ

ë³€ê²½ í›„:
  1ìˆœìœ„: ì‹œê°„ ìˆœì„œ (ì´ë¥¸ ì‹œê°„ë¶€í„°) â† ìµœìš°ì„ 
  2ìˆœìœ„: ë¸”ë¡ ê¸¸ì´ (ì§§ì€ ë¸”ë¡ ìš°ì„ , 1ì‹œê°„ ë‹¨ìœ„ ë°°ì •)
  3ìˆœìœ„: í•„ìš”ëŸ‰ ì¶©ì¡± ì—¬ë¶€

ìˆ˜ì • 2: ë¼ìš´ë“œ ë¡œë¹ˆ ë°°ì • ë°©ì‹ ì ìš©
- ê° ë©¤ë²„ì—ê²Œ 1ì‹œê°„(2ìŠ¬ë¡¯)ì”©ë§Œ ë°°ì •
- ëª¨ë“  ë©¤ë²„ë¥¼ ìˆœíšŒí•˜ë©° ìˆœì°¨ ë°°ì •
- 2ë‹¨ê³„ì—ì„œ ë¶€ì¡±í•œ ë©¤ë²„ë“¤ì—ê²Œ ì¶”ê°€ ë°°ì •

[Phase 2] transportMode ë¡œì§ ë¶„ë¦¬ ê²€í† 
íŒŒì¼: server/services/schedulingAlgorithm/index.js

í˜„ì¬ ë¬¸ì œ:
- transportModeê°€ ë°°ì • ë¡œì§ê³¼ í˜¼í•©ë˜ì–´ ìˆìŒ
- 'normal'ì´ ì•„ë‹ˆë©´ ë‹¤ë¥¸ ì•Œê³ ë¦¬ì¦˜(assignByPublicTransport) ì‚¬ìš©

ê¶Œì¥ ìˆ˜ì •:
- transportModeëŠ” ë°°ì • í›„ "ë³´ê¸°" ì²˜ë¦¬ë¡œë§Œ ì‚¬ìš©
- ëª¨ë“  ë°°ì • ëª¨ë“œì—ì„œ assignByTimeOrder ì‚¬ìš©
- assignByPublicTransportëŠ” ë³„ë„ ì˜µì…˜ìœ¼ë¡œ ë¶„ë¦¬

============================================================================
4. ìˆ˜ì • ì½”ë“œ
============================================================================

[íŒŒì¼ 1] server/services/schedulingAlgorithm/services/slotAssignmentService.js

ìˆ˜ì • ëŒ€ìƒ: assignByTimeOrder í•¨ìˆ˜ (276-289ë²ˆì§¸ ì¤„)

ê¸°ì¡´ ì½”ë“œ:
```javascript
allPossibleBlocks.sort((a, b) => {
  // 1ìˆœìœ„: í•„ìš”í•œ ë§Œí¼ ì±„ìš¸ ìˆ˜ ìˆëŠ” ë¸”ë¡ ìš°ì„  (ë¶„í•  ìµœì†Œí™”)
  const aIsFull = a.block.length >= remainingSlots;
  const bIsFull = b.block.length >= remainingSlots;
  if (aIsFull !== bIsFull) return bIsFull ? 1 : -1;

  // 2ìˆœìœ„: ê¸´ ë¸”ë¡ ìš°ì„ 
  const lengthDiff = b.block.length - a.block.length;
  if (lengthDiff !== 0) return lengthDiff;

  // 3ìˆœìœ„: ì‹œê°„ ìˆœì„œ (ì´ë¥¸ ì‹œê°„ë¶€í„°)
  return a.startIndex - b.startIndex;
});
```

ìˆ˜ì • ì½”ë“œ:
```javascript
allPossibleBlocks.sort((a, b) => {
  // ğŸ†• 1ìˆœìœ„: ì‹œê°„ ìˆœì„œ (ì´ë¥¸ ì‹œê°„ë¶€í„°) - ìµœìš°ì„ !
  const timeOrderDiff = a.startIndex - b.startIndex;
  if (timeOrderDiff !== 0) return timeOrderDiff;

  // ğŸ†• 2ìˆœìœ„: ì§§ì€ ë¸”ë¡ ìš°ì„  (1ì‹œê°„=2ìŠ¬ë¡¯ ë‹¨ìœ„ ë°°ì •)
  const lengthDiff = a.block.length - b.block.length;
  if (lengthDiff !== 0) return lengthDiff;

  // 3ìˆœìœ„: í•„ìš”ëŸ‰ ì¶©ì¡± ì—¬ë¶€ (ë™ì¼ ì‹œê°„ëŒ€, ë™ì¼ ê¸¸ì´ì¼ ë•Œë§Œ)
  const aIsFull = a.block.length >= remainingSlots;
  const bIsFull = b.block.length >= remainingSlots;
  if (aIsFull !== bIsFull) return bIsFull ? 1 : -1;

  return 0;
});
```

ì¶”ê°€ ìˆ˜ì •: 1ì‹œê°„ ë‹¨ìœ„ ë°°ì • ê°•ì œ
```javascript
// ìµœì  ë¸”ë¡ ë°°ì • (ê°€ì¥ ì´ë¥¸ ì‹œê°„, ìµœëŒ€ 1ì‹œê°„)
const bestBlock = allPossibleBlocks[0];
const assignedHoursBefore = assignments[memberId]?.assignedHours || 0;
const stillNeeded = requiredSlots - assignedHoursBefore;

// ğŸ†• í•œ ë²ˆì— ìµœëŒ€ 2ìŠ¬ë¡¯(1ì‹œê°„)ë§Œ ë°°ì •
const maxSlotsPerRound = 2;
const slotsToAssign = Math.min(bestBlock.block.length, stillNeeded, maxSlotsPerRound);
const blockToAssign = bestBlock.block.slice(0, slotsToAssign);
```

============================================================================
5. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
============================================================================

[ì‹œë‚˜ë¦¬ì˜¤ 1] ê¸°ë³¸ ì‹œê°„ ìˆœì„œ ë°°ì •
- A: 9-12ì‹œ ì„ í˜¸, 3ì‹œê°„ í•„ìš”
- B: 10-17ì‹œ ì„ í˜¸, 3ì‹œê°„ í•„ìš”
- ê¸°ëŒ€ ê²°ê³¼: A(9-10), B(10-11), A(11-12), B(13-14), A(14-15), B(15-16)

[ì‹œë‚˜ë¦¬ì˜¤ 2] ì„ ì°©ìˆœ ëª¨ë“œ
- A: joinedAt = 2025-01-01, 9-17ì‹œ ì„ í˜¸
- B: joinedAt = 2025-01-02, 9-17ì‹œ ì„ í˜¸
- ê¸°ëŒ€ ê²°ê³¼: A ìš°ì„  ë°°ì •

[ì‹œë‚˜ë¦¬ì˜¤ 3] ì˜¤ëŠ˜ ê¸°ì¤€ ëª¨ë“œ
- ì˜¤ëŠ˜: 2025-12-15
- A: 12-10~12-14, 12-16~12-20 ì„ í˜¸
- ê¸°ëŒ€ ê²°ê³¼: 12-16~12-20ë§Œ ë°°ì • (ê³¼ê±° ì œì™¸)

============================================================================
6. íŒŒì¼ ëª©ë¡
============================================================================

ìˆ˜ì • ëŒ€ìƒ:
1. server/services/schedulingAlgorithm/services/slotAssignmentService.js
   - assignByTimeOrder í•¨ìˆ˜ (276-315ë²ˆì§¸ ì¤„)

ê²€í†  ëŒ€ìƒ:
2. server/services/schedulingAlgorithm/index.js
   - transportMode ë¶„ê¸° ë¡œì§ (116-122ë²ˆì§¸ ì¤„)

ì°¸ê³ :
3. client/src/components/scheduler/AutoSchedulerPanel.js
   - ë°°ì • ëª¨ë“œ UI
4. client/src/hooks/useTravelMode.js
   - ë³´ê¸° ì˜µì…˜ ê´€ë¦¬
5. client/src/utils/coordinationHandlers.js
   - ìë™ë°°ì • ì‹¤í–‰ í•¸ë“¤ëŸ¬

============================================================================

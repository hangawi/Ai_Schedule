================================================================================
대중교통 모드 배정 문제 정리
================================================================================
작성일: 2026-01-02

## 문제 1: 배정 시간에 따라 동작이 다름
--------------------------------------------------------------------------------

### 현상
- **1시간 배정**: 정상 작동
  - 이이가 월요일에 잘 배정됨
  - 거리 순서대로 배정됨 (이이 > 삼삼 > 사사)

- **2시간 이상 배정**: 비정상 작동
  - 순서가 바뀜
  - 겹침 발생하여 재배정됨
  - 삼삼이 09:10-11:10으로 재배정됨 (원래는 13:00-15:00이어야 함)

### 거리 순서
- 방장에서 가까운 순서: 이이 > 삼삼 > 사사

### 예상 동작
- 월요일: 방장 → 이이 → 삼삼 → 사사
- 화요일: 방장 → 이이 → 삼삼 → 사사
- 같은 날짜 내에서 거리 순서대로 연속 배정

### 실제 동작 (2시간 배정 시)
- 이이: 09:00-10:20
- 삼삼: 10:20-11:40 (재배정됨, 원래 13:00-15:00이어야 함)
- 사사: 13:00-14:20

### 의문점
1. 왜 1시간일 때는 정상인데 2시간 이상일 때는 문제가 발생하는가?
2. 자동배정 결과가 1시간과 2시간일 때 다른가?
3. 거리 정렬 로직이 시간 길이에 따라 다르게 동작하는가?


## 문제 2: C(사사)가 월요일에 자리가 있는데도 수요일로 배정됨
--------------------------------------------------------------------------------

### 현상
- 월요일에 배정 가능한 시간이 있음
- 하지만 사사는 계속 수요일로 배정됨

### 예상 동작
- 사사: 월요일에 배정되어야 함 (방장 → 이이 → 삼삼 → 사사 순서)

### 실제 동작
- 사사: 수요일에 배정됨

### 의문점
1. 왜 월요일에 자리가 있는데 수요일로 가는가?
2. 재배정 로직(findAvailableSlot)이 잘못되었는가?
3. 선호시간 문제인가?


## 수정된 파일
--------------------------------------------------------------------------------
- client/src/services/travelScheduleCalculator.js
  - 1127-1154: 거리 순서 유지하며 정렬
  - 1354-1370: 같은 날짜 내 이전 학생에서 출발, 다른 날짜면 방장에서 출발
  - 1390-1397: 원래 수업 시간 유지, 이동 시간은 앞에 추가

- client/src/utils/coordinationHandlers.js
  - 594: 경고 메시지 비활성화


## 디버깅 방법
--------------------------------------------------------------------------------

### 1시간 vs 2시간 배정 비교
1. 1시간 배정 후 일반 모드에서 "🔍 [최종 정렬 결과]:" 로그 확인
2. 2시간 배정 후 일반 모드에서 "🔍 [최종 정렬 결과]:" 로그 확인
3. 두 결과 비교하여 자동배정 결과가 다른지 확인

### 거리 정렬 확인
- "🔍 [거리 정렬]" 로그 확인
- 거리 순서가 올바른지 확인 (이이 > 삼삼 > 사사)

### 재배정 확인
- "❌ [겹침 발견]" 로그 확인
- "✅ [재배정 성공]" 로그 확인
- 왜 겹침이 발생하는지, 어디로 재배정되는지 확인


## 추가 조사 필요
--------------------------------------------------------------------------------
1. sortSlotsByDistance 함수가 슬롯 개수(1시간 vs 2시간)에 따라 다르게 동작하는지
2. 자동배정 로직이 시간 길이에 따라 다르게 동작하는지
3. 재배정 로직(findAvailableSlot)이 왜 수요일로 배정하는지

================================================================================

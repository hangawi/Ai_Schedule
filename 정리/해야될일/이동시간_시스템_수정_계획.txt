================================================================================
ì´ë™ì‹œê°„ ì‹œìŠ¤í…œ ìˆ˜ì • ê³„íš
================================================================================

ì‘ì„±ì¼: 2025-12-15
ëª©ì : ë°©ì¥ì˜ ì´ë™ìˆ˜ë‹¨ ì„ íƒ ì‹œ íƒ€ì´ë¨¸ ì´ˆê¸°í™” ë° ì¡°ì› ì‹œê°„í‘œ ë™ê¸°í™”

================================================================================
â–  í˜„ì¬ ë¬¸ì œì 
================================================================================

ë¬¸ì œ 1: íƒ€ì´ë¨¸ê°€ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ
  - í˜„ì¬: ë³´ê¸° ë²„íŠ¼(ëŒ€ì¤‘êµí†µ â†’ ìë™ì°¨)ì„ ë°”ê¿”ë„ íƒ€ì´ë¨¸ê°€ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ
  - ìš”êµ¬: ë³´ê¸° ë²„íŠ¼ì„ ë°”ê¿€ ë•Œë§ˆë‹¤ íƒ€ì´ë¨¸ê°€ ë‹¤ì‹œ 48ì‹œê°„(í…ŒìŠ¤íŠ¸: 1ë¶„)ìœ¼ë¡œ ì¬ì‹œì‘

ë¬¸ì œ 2: ì¡°ì›ì—ê²Œ ì´ë™ìˆ˜ë‹¨ ëª¨ë“œê°€ ì ìš©ë˜ì§€ ì•ŠìŒ
  - í˜„ì¬: ì¡°ì›ì€ ì¼ë°˜ ì‹œê°„í‘œë§Œ ë´„
  - ìš”êµ¬: ë°©ì¥ì´ ì„ íƒí•œ ì´ë™ìˆ˜ë‹¨(ì˜ˆ: ëŒ€ì¤‘êµí†µ)ì´ ì ìš©ëœ ì‹œê°„í‘œë¥¼ ì¡°ì›ë„ ë´„
         ë‹¨, ì´ˆë¡ìƒ‰ ì´ë™ì‹œê°„ ë¸”ë¡ì€ ì¡°ì›ì—ê²Œ ìˆ¨ê¹€

ë¬¸ì œ 3: ì¡°ì› ì‹œê°„ ì„ íƒ UIê°€ ì—†ìŒ
  - í˜„ì¬: êµí™˜ ìš”ì²­ ëª¨ë‹¬ì—ì„œ ëª¨ë“  ì‹œê°„ëŒ€ë¥¼ ì„ íƒ ê°€ëŠ¥
  - ìš”êµ¬: available-slots APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë™ì‹œê°„ ë•Œë¬¸ì— ë¶ˆê°€ëŠ¥í•œ ì‹œê°„ì€ ì°¨ë‹¨

================================================================================
â–  ìˆ˜ì • ê³„íš (3ë‹¨ê³„)
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase A: íƒ€ì´ë¨¸ ì´ˆê¸°í™” ë¡œì§ ì¶”ê°€                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ëª©í‘œ: ë³´ê¸° ë²„íŠ¼ ë³€ê²½ ì‹œë§ˆë‹¤ íƒ€ì´ë¨¸ ì¬ì‹œì‘

[A-1] ë°±ì—”ë“œ: íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸ ë¡œì§ ìˆ˜ì •
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

íŒŒì¼: server/controllers/coordinationSchedulingController.js

ìˆ˜ì •í•  í•¨ìˆ˜: startConfirmationTimer()

í˜„ì¬ ë¡œì§:
  1. ì´ë¯¸ íƒ€ì´ë¨¸ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
  2. ì‹¤í–‰ ì¤‘ì´ë©´ ì—ëŸ¬ ë°˜í™˜
  3. ì‹¤í–‰ ì¤‘ì´ ì•„ë‹ˆë©´ íƒ€ì´ë¨¸ ì‹œì‘

ìˆ˜ì •í•  ë¡œì§:
  1. íƒ€ì´ë¨¸ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
  2. ì‹¤í–‰ ì¤‘ì´ë©´:
     - ì´ì „ íƒ€ì´ë¨¸ ì·¨ì†Œ
     - ìƒˆë¡œìš´ íƒ€ì´ë¨¸ ì‹œì‘ (ì´ˆê¸°í™”)
  3. ì‹¤í–‰ ì¤‘ì´ ì•„ë‹ˆë©´:
     - ìƒˆë¡œìš´ íƒ€ì´ë¨¸ ì‹œì‘

ì½”ë“œ ì˜ˆì‹œ:
```javascript
exports.startConfirmationTimer = async (req, res) => {
  try {
    const { roomId } = req.params;
    const { travelMode } = req.body;

    const room = await Room.findById(roomId);
    if (!room) {
      return res.status(404).json({ msg: 'ë°©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' });
    }

    if (!room.isOwner(req.user.id)) {
      return res.status(403).json({ msg: 'ë°©ì¥ë§Œ ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.' });
    }

    if (!room.timeSlots || room.timeSlots.length === 0) {
      return res.status(400).json({ msg: 'ìë™ë°°ì •ì„ ë¨¼ì € ì‹¤í–‰í•´ì£¼ì„¸ìš”.' });
    }

    if (room.confirmedAt) {
      return res.status(400).json({ msg: 'ì´ë¯¸ í™•ì •ëœ ìŠ¤ì¼€ì¤„ì…ë‹ˆë‹¤.' });
    }

    // âœ¨ ìˆ˜ì •: ì´ë¯¸ íƒ€ì´ë¨¸ê°€ ì‹¤í–‰ ì¤‘ì´ë©´ ì´ˆê¸°í™”
    let isTimerReset = false;
    if (room.autoConfirmAt && new Date(room.autoConfirmAt) > new Date()) {
      console.log(`ğŸ”„ [íƒ€ì´ë¨¸ ì´ˆê¸°í™”] ê¸°ì¡´: ${room.autoConfirmAt}, ìƒˆ ëª¨ë“œ: ${travelMode}`);
      isTimerReset = true;
    }

    // íƒ€ì´ë¨¸ ì„¤ì • (í…ŒìŠ¤íŠ¸: 1ë¶„, ì‹¤ì œ: 48ì‹œê°„)
    const confirmTime = new Date();
    confirmTime.setMinutes(confirmTime.getMinutes() + 1);  // í…ŒìŠ¤íŠ¸ìš©: 1ë¶„
    // confirmTime.setHours(confirmTime.getHours() + 48);  // ì‹¤ì œìš©: 48ì‹œê°„

    room.autoConfirmAt = confirmTime;
    room.confirmedTravelMode = travelMode;
    await room.save();

    console.log(`â° [íƒ€ì´ë¨¸ ${isTimerReset ? 'ì¬ì‹œì‘' : 'ì‹œì‘'}] ë°© ${roomId}: ${confirmTime.toISOString()}, ì´ë™ìˆ˜ë‹¨: ${travelMode}`);

    // Socket.io ì•Œë¦¼
    if (global.io) {
      global.io.to(`room-${roomId}`).emit('timer-started', {
        roomId: roomId,
        autoConfirmAt: confirmTime,
        travelMode: travelMode,
        isReset: isTimerReset,
        message: isTimerReset ? 'íƒ€ì´ë¨¸ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ìë™ í™•ì • íƒ€ì´ë¨¸ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.',
        timestamp: new Date()
      });
    }

    res.json({
      msg: isTimerReset ? 'íƒ€ì´ë¨¸ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ìë™ í™•ì • íƒ€ì´ë¨¸ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.',
      autoConfirmAt: confirmTime,
      travelMode: travelMode,
      minutesRemaining: 1,  // í…ŒìŠ¤íŠ¸ìš©
      isReset: isTimerReset
    });

  } catch (error) {
    console.error('âŒ íƒ€ì´ë¨¸ ì‹œì‘ ì‹¤íŒ¨:', error);
    res.status(500).json({ msg: 'ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', error: error.message });
  }
};
```

ì˜ˆìƒ ì‹œê°„: 30ë¶„


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase B: ì¡°ì›ì—ê²Œ ì´ë™ìˆ˜ë‹¨ ëª¨ë“œ ì ìš©                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ëª©í‘œ: ì¡°ì›ë„ ë°©ì¥ì´ ì„ íƒí•œ ì´ë™ìˆ˜ë‹¨ ëª¨ë“œê°€ ì ìš©ëœ ì‹œê°„í‘œë¥¼ ë´„
     ë‹¨, ì´ë™ì‹œê°„ ë¸”ë¡ì€ ìˆ¨ê¹€

[B-1] ë°±ì—”ë“œ: Room ë°ì´í„°ì— ì´ë™ìˆ˜ë‹¨ ëª¨ë“œ ë…¸ì¶œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

í˜„ì¬ ìƒíƒœ:
  - Room ëª¨ë¸ì— confirmedTravelMode í•„ë“œ ìˆìŒ
  - í•˜ì§€ë§Œ í™•ì • ì „ì—ëŠ” null

ìˆ˜ì • ë°©ì•ˆ:
  - ìƒˆ í•„ë“œ ì¶”ê°€: currentTravelMode (í™•ì • ì „ ì„ì‹œ ëª¨ë“œ)
  - íƒ€ì´ë¨¸ ì‹œì‘ ì‹œ currentTravelMode ì„¤ì •
  - í™•ì • ì‹œ confirmedTravelModeì— ë³µì‚¬

íŒŒì¼: server/models/room.js

ì¶”ê°€í•  í•„ë“œ:
```javascript
// í˜„ì¬ ì„ íƒëœ ì´ë™ìˆ˜ë‹¨ ëª¨ë“œ (í™•ì • ì „ ì„ì‹œ)
currentTravelMode: {
  type: String,
  enum: ['normal', 'transit', 'driving', 'bicycling', 'walking', null],
  default: null
}
```

íŒŒì¼: server/controllers/coordinationSchedulingController.js
í•¨ìˆ˜: startConfirmationTimer()

ì¶”ê°€í•  ë¡œì§:
```javascript
room.currentTravelMode = travelMode;  // ì„ì‹œ ëª¨ë“œ ì €ì¥
room.confirmedTravelMode = null;      // ì•„ì§ í™•ì • ì•ˆë¨
```

ì˜ˆìƒ ì‹œê°„: 15ë¶„


[B-2] í”„ë¡ íŠ¸ì—”ë“œ: ì¡°ì› ì‹œê°„í‘œì— ì´ë™ìˆ˜ë‹¨ ëª¨ë“œ ì ìš©
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

íŒŒì¼: client/src/components/tabs/CoordinationTab/index.js

ìˆ˜ì •í•  ë¶€ë¶„:
  - useTravelMode í›… ì‚¬ìš© ë¡œì§
  - ì¡°ì›ë„ currentTravelMode í™•ì¸í•˜ì—¬ ì‹œê°„í‘œ ê³„ì‚°

í˜„ì¬ ë¡œì§:
```javascript
const {
  travelMode,
  handleModeChange: handleTravelModeChange,
  isCalculating: isTravelCalculating,
  error: travelError,
  getCurrentScheduleData
} = useTravelMode(currentRoom);
```

ìˆ˜ì •í•  ë¡œì§:
```javascript
// ë°©ì¥ì´ë©´ ìì‹ ì´ ì„ íƒí•œ ëª¨ë“œ ì‚¬ìš©
// ì¡°ì›ì´ë©´ ë°©ì¥ì´ ì„ íƒí•œ currentTravelMode ì‚¬ìš©
const effectiveTravelMode = isOwner
  ? travelMode
  : (currentRoom?.currentTravelMode || 'normal');

const {
  travelMode: displayMode,
  handleModeChange: handleTravelModeChange,
  isCalculating: isTravelCalculating,
  error: travelError,
  getCurrentScheduleData
} = useTravelMode(currentRoom, effectiveTravelMode);
```


íŒŒì¼: client/src/hooks/useTravelMode.js

ìˆ˜ì •í•  ë¶€ë¶„:
  - ì¡°ì›ìš© ì´ë™ì‹œê°„ ë¸”ë¡ í•„í„°ë§
  - isOwner íŒŒë¼ë¯¸í„° ì¶”ê°€

ìˆ˜ì •í•  í•¨ìˆ˜:
```javascript
export const useTravelMode = (currentRoom, initialMode = 'normal', isOwner = true) => {
  const [travelMode, setTravelMode] = useState(initialMode);

  // ... ê¸°ì¡´ ë¡œì§ ...

  const getCurrentScheduleData = useCallback(() => {
    if (travelMode === 'normal' || !enhancedSchedule) {
      return {
        timeSlots: currentRoom?.timeSlots || [],
        travelSlots: [],
        travelMode: travelMode
      };
    }

    // âœ¨ ìˆ˜ì •: ì¡°ì›ì´ë©´ travelSlots ì œê±° (ì´ë™ì‹œê°„ ë¸”ë¡ ìˆ¨ê¹€)
    if (!isOwner) {
      return {
        timeSlots: enhancedSchedule.timeSlots.filter(slot => !slot.isTravel),
        travelSlots: [],
        travelMode: travelMode
      };
    }

    return enhancedSchedule;
  }, [travelMode, enhancedSchedule, currentRoom, isOwner]);

  // ... ê¸°ì¡´ ë¡œì§ ...
}
```

ì˜ˆìƒ ì‹œê°„: 1ì‹œê°„


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase C: ì¡°ì› ì‹œê°„ ì„ íƒ UI ì¶”ê°€                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ëª©í‘œ: ì¡°ì›ì´ ì‹œê°„ì„ ì„ íƒí•  ë•Œ available-slots APIë¡œ ê°€ëŠ¥í•œ ì‹œê°„ë§Œ í‘œì‹œ

[C-1] ë°±ì—”ë“œ: available-slots API ê°œì„ 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

í˜„ì¬ ìƒíƒœ:
  - API ì—”ë“œí¬ì¸íŠ¸ ìˆìŒ
  - ê¸°ë³¸ ê²€ì¦ ë¡œì§ ìˆìŒ

ì¶”ê°€ ê°œì„ :
  - currentTravelMode ì‚¬ìš© (confirmedTravelModeê°€ nullì¼ ë•Œ)
  - ë” ì •í™•í•œ ìœ„ì¹˜ ì •ë³´ ì²˜ë¦¬

íŒŒì¼: server/controllers/coordinationSchedulingController.js
í•¨ìˆ˜: getAvailableSlots()

ìˆ˜ì •:
```javascript
// í˜„ì¬ ì´ë™ìˆ˜ë‹¨ ëª¨ë“œ ê²°ì •
const travelMode = room.confirmedTravelMode || room.currentTravelMode || 'normal';

// ì´ë™ìˆ˜ë‹¨ ëª¨ë“œê°€ 'normal'ì´ë©´ ëª¨ë“  ì‹œê°„ëŒ€ ê°€ëŠ¥
if (travelMode === 'normal') {
  const allAvailable = allPossibleSlots.map(slot => ({
    startTime: slot.startTime,
    endTime: slot.endTime,
    available: true
  }));

  return res.json({
    date,
    slots: allAvailable,
    travelMode: 'normal',
    message: 'ì¼ë°˜ ëª¨ë“œ: ëª¨ë“  ì‹œê°„ëŒ€ ì„ íƒ ê°€ëŠ¥'
  });
}

// ì´ë™ìˆ˜ë‹¨ ëª¨ë“œê°€ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ ê²€ì¦
for (const slot of allPossibleSlots) {
  const validation = await dynamicTravelTimeCalculator.validateNewSlotPlacement(
    roomId,
    new Date(date),
    slot.startTime,
    slot.endTime,
    location
  );

  availabilityResults.push({
    startTime: slot.startTime,
    endTime: slot.endTime,
    available: validation.valid
  });
}
```

ì˜ˆìƒ ì‹œê°„: 30ë¶„


[C-2] í”„ë¡ íŠ¸ì—”ë“œ: êµí™˜ ìš”ì²­ ëª¨ë‹¬ UI ê°œì„ 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

íŒŒì¼: client/src/components/modals/ChangeRequestModal.js
ë˜ëŠ” ìƒˆ íŒŒì¼: client/src/components/modals/TimeSelectionModal.js

ëª©í‘œ:
  1. ì¡°ì›ì´ ì‹œê°„ ì„ íƒ ëª¨ë‹¬ ì—´ê¸°
  2. ë‚ ì§œ ì„ íƒ
  3. ì¡°ì›ì˜ ìœ„ì¹˜ ì…ë ¥ (Google Maps ìë™ì™„ì„±)
  4. available-slots API í˜¸ì¶œ
  5. ê°€ëŠ¥í•œ ì‹œê°„ëŒ€ë§Œ ì„ íƒ ê°€ëŠ¥í•˜ê²Œ í‘œì‹œ
     - ê°€ëŠ¥: ì´ˆë¡ìƒ‰ í…Œë‘ë¦¬
     - ë¶ˆê°€ëŠ¥: íšŒìƒ‰ + í´ë¦­ ë¶ˆê°€

UI êµ¬ì¡°:
```jsx
<TimeSelectionModal>
  {/* 1. ë‚ ì§œ ì„ íƒ */}
  <DatePicker />

  {/* 2. ìœ„ì¹˜ ì…ë ¥ */}
  <LocationInput
    placeholder="ìˆ˜ì—… ì¥ì†Œ ì…ë ¥ (ì˜ˆ: ê°•ë‚¨ì—­)"
    onLocationSelect={handleLocationSelect}
  />

  {/* 3. ê°€ëŠ¥í•œ ì‹œê°„ëŒ€ í‘œì‹œ */}
  <TimeGrid>
    {availableSlots.map(slot => (
      <TimeSlot
        key={`${slot.startTime}-${slot.endTime}`}
        available={slot.available}
        onClick={() => slot.available && handleTimeSelect(slot)}
        className={slot.available ? 'available' : 'blocked'}
      >
        {slot.startTime} - {slot.endTime}
        {!slot.available && <Lock icon />}
      </TimeSlot>
    ))}
  </TimeGrid>

  {/* 4. ì„ íƒ ì™„ë£Œ ë²„íŠ¼ */}
  <Button onClick={handleSubmit}>
    ì‹œê°„ ì„ íƒ ì™„ë£Œ
  </Button>
</TimeSelectionModal>
```

ìƒˆë¡œ ë§Œë“¤ ì»´í¬ë„ŒíŠ¸:
  1. TimeSelectionModal.js - ì‹œê°„ ì„ íƒ ëª¨ë‹¬
  2. LocationInput.js - Google Maps ìë™ì™„ì„± ì…ë ¥
  3. TimeGrid.js - ì‹œê°„ëŒ€ ê·¸ë¦¬ë“œ

ì˜ˆìƒ ì‹œê°„: 2-3ì‹œê°„


[C-3] Google Maps Places Autocomplete í†µí•©
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

íŒŒì¼: client/src/components/common/LocationInput.js (ìƒˆë¡œ ìƒì„±)

ëª©í‘œ: ì¡°ì›ì´ ìˆ˜ì—… ì¥ì†Œë¥¼ ì…ë ¥í•  ë•Œ ìë™ì™„ì„± ì œê³µ

êµ¬í˜„:
```jsx
import { useLoadScript, Autocomplete } from '@react-google-maps/api';

const LocationInput = ({ onLocationSelect }) => {
  const [autocomplete, setAutocomplete] = useState(null);

  const { isLoaded } = useLoadScript({
    googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,
    libraries: ['places']
  });

  const onLoad = (autocompleteInstance) => {
    setAutocomplete(autocompleteInstance);
  };

  const onPlaceChanged = () => {
    if (autocomplete) {
      const place = autocomplete.getPlace();
      const location = {
        type: 'coordinates',
        address: place.formatted_address,
        coordinates: {
          lat: place.geometry.location.lat(),
          lng: place.geometry.location.lng()
        },
        description: place.name
      };
      onLocationSelect(location);
    }
  };

  if (!isLoaded) return <div>Loading...</div>;

  return (
    <Autocomplete onLoad={onLoad} onPlaceChanged={onPlaceChanged}>
      <input
        type="text"
        placeholder="ìˆ˜ì—… ì¥ì†Œ ì…ë ¥ (ì˜ˆ: ê°•ë‚¨ì—­ ìŠ¤í„°ë””ì¹´í˜)"
        className="w-full px-4 py-2 border rounded-lg"
      />
    </Autocomplete>
  );
};
```

ì˜ˆìƒ ì‹œê°„: 1ì‹œê°„


================================================================================
â–  ì „ì²´ ì¼ì • ìš”ì•½
================================================================================

Phase A: íƒ€ì´ë¨¸ ì´ˆê¸°í™” ë¡œì§
  - A-1: ë°±ì—”ë“œ ìˆ˜ì • (30ë¶„)
  - ì†Œê³„: 30ë¶„

Phase B: ì¡°ì›ì—ê²Œ ì´ë™ìˆ˜ë‹¨ ëª¨ë“œ ì ìš©
  - B-1: ë°±ì—”ë“œ í•„ë“œ ì¶”ê°€ (15ë¶„)
  - B-2: í”„ë¡ íŠ¸ì—”ë“œ ì‹œê°„í‘œ ë™ê¸°í™” (1ì‹œê°„)
  - ì†Œê³„: 1ì‹œê°„ 15ë¶„

Phase C: ì¡°ì› ì‹œê°„ ì„ íƒ UI
  - C-1: API ê°œì„  (30ë¶„)
  - C-2: ì‹œê°„ ì„ íƒ ëª¨ë‹¬ (2-3ì‹œê°„)
  - C-3: Google Maps í†µí•© (1ì‹œê°„)
  - ì†Œê³„: 3.5-4.5ì‹œê°„

ì´ ì˜ˆìƒ ì‹œê°„: 5-6ì‹œê°„

================================================================================
â–  ìš°ì„ ìˆœìœ„
================================================================================

1ìˆœìœ„: Phase A (íƒ€ì´ë¨¸ ì´ˆê¸°í™”) - 30ë¶„
  â†’ ê°€ì¥ ì¤‘ìš”í•˜ê³  ê°„ë‹¨í•¨

2ìˆœìœ„: Phase B (ì¡°ì› ì‹œê°„í‘œ ë™ê¸°í™”) - 1ì‹œê°„ 15ë¶„
  â†’ í•µì‹¬ ê¸°ëŠ¥

3ìˆœìœ„: Phase C (ì¡°ì› ì‹œê°„ ì„ íƒ UI) - 3.5-4.5ì‹œê°„
  â†’ UI ì‘ì—…ì´ë¼ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¼
  â†’ ë‚˜ì¤‘ì— ì¶”ê°€ ê°œì„  ê°€ëŠ¥

================================================================================
â–  í…ŒìŠ¤íŠ¸ ê³„íš
================================================================================

Test 1: íƒ€ì´ë¨¸ ì´ˆê¸°í™”
  1. ìë™ë°°ì • ì‹¤í–‰
  2. "ëŒ€ì¤‘êµí†µ" ì„ íƒ â†’ íƒ€ì´ë¨¸ 1ë¶„ í™•ì¸
  3. "ìë™ì°¨" ì„ íƒ â†’ íƒ€ì´ë¨¸ ë‹¤ì‹œ 1ë¶„ìœ¼ë¡œ ì´ˆê¸°í™” í™•ì¸

Test 2: ì¡°ì› ì‹œê°„í‘œ ë™ê¸°í™”
  1. ë°©ì¥: "ëŒ€ì¤‘êµí†µ" ì„ íƒ
  2. ì¡°ì›: ì‹œê°„í‘œ í™•ì¸ â†’ ëŒ€ì¤‘êµí†µ ì ìš©ë˜ì§€ë§Œ ì´ˆë¡ìƒ‰ ë¸”ë¡ ì—†ìŒ

Test 3: ì¡°ì› ì‹œê°„ ì„ íƒ
  1. ì¡°ì›: êµí™˜ ìš”ì²­ ëª¨ë‹¬ ì—´ê¸°
  2. ë‚ ì§œ ì„ íƒ, ìœ„ì¹˜ ì…ë ¥
  3. ê°€ëŠ¥í•œ ì‹œê°„ëŒ€ë§Œ ì„ íƒ ê°€ëŠ¥ í™•ì¸
  4. ë¶ˆê°€ëŠ¥í•œ ì‹œê°„ëŒ€ëŠ” íšŒìƒ‰ + ì ê¸ˆ ì•„ì´ì½˜

================================================================================
â–  ì£¼ì˜ì‚¬í•­
================================================================================

1. currentTravelMode vs confirmedTravelMode
   - currentTravelMode: í™•ì • ì „ ì„ì‹œ ëª¨ë“œ (ë³´ê¸° ë²„íŠ¼ ì„ íƒ ì‹œ)
   - confirmedTravelMode: í™•ì • í›„ ê³ ì • ëª¨ë“œ

2. ì¡°ì›ì€ ì´ë™ì‹œê°„ ë¸”ë¡ì„ ë³´ë©´ ì•ˆë¨
   - travelSlots í•„í„°ë§ í•„ìˆ˜

3. ìœ„ì¹˜ ì •ë³´ëŠ” í•„ìˆ˜
   - Google Maps API Key í•„ìš”
   - ìœ„ì¹˜ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©

4. íƒ€ì´ë¨¸ ì‹œê°„
   - í…ŒìŠ¤íŠ¸: 1ë¶„
   - ì‹¤ì œ: 48ì‹œê°„
   - ì½”ë“œì—ì„œ ì‰½ê²Œ ë³€ê²½ ê°€ëŠ¥í•˜ë„ë¡ ìƒìˆ˜í™”

================================================================================
